// Generated by CoffeeScript 1.8.0
(function() {
  var argv, parseOpts;

  argv = require('yargs').usage('Usage: $0 -p [port] -d [directory_path]').alias('p', 'port').describe('port', 'specify local port to listen on, or use ip:port to listen on specific ip/port').alias('d', 'dir').describe('dir', 'specify the root www local dir').alias('b', 'browse').describe('browse', 'launch local browser to open the page').help('h').argv;

  parseOpts = function(cb) {
    var opts, _ref;
    opts = {};
    opts.dir = argv.dir;
    if (opts.dir == null) {
      opts.dir = process.cwd();
    }
    if (argv.port) {
      if (/\:/.test(argv.port)) {
        _ref = argv.port.split(':'), opts.ip = _ref[0], opts.port = _ref[1];
      } else {
        opts.port = argv.port;
      }
      return cb(opts);
    } else {
      return require('find-free-port')(9900, function(err, _p) {
        opts.port = _p;
        return cb(opts);
      });
    }
  };

  parseOpts(function(opts) {
    require("../").initAppFunc = function(app, express) {
      return app.use(express["static"](opts.dir));
    };
    return require("../").launch(opts.port, opts.ip, function() {
      var open, url;
      if (argv.b) {
        url = "http://localhost:" + opts.port;
        console.log("Browsing to " + url);
        open = require("open");
        return open(url);
      }
    });
  });

}).call(this);

//# sourceMappingURL=servedir.js.map
